!function(){"use strict";var e=Object.freeze({setup:function(){var e;e="Basic OGY1OGIxMDMtODQwOS00OTM1LWE5MDEtMjhmYzgzMWQ3ZmY1Ojg4OVYxbE1lNG9FYU5Mbmo3RFFnWTVEalNMT1g5ZHVuSGNIZmNUaVlwTEJDYWs3UmhQZzR3bzB1ajJnZk1wMmc=",window.__ctlst_authkey=e,window.__cat_track_event&&window.__cat_track_event,console.log("[*] CatTrack initialized.")}}),t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},l=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};function d(e){return!e.siblings("ul:not(.simple)").length}function c(e){for(var t=[],n=0;n<e.length;n+=1)t.push(e[n]);return t}function p(e){var t=window.docsExcludedNav;if(!t||!t.length)return!1;for(var n=0;n<t.length;n+=1)if(-1!==e[0].href.indexOf(t[n]))return!0;return!1}function h(e,t){console.log("report analytics",e,t)}var m=function(){function e(){n(this,e),this.listeners=[]}return r(e,[{key:"listen",value:function(e){this.listeners.push(e)}},{key:"dispatch",value:function(e){for(var t=0;t<this.listeners.length;t+=1)this.listeners[t](e)}}]),e}(),f="accordion--collapsed";function v(e){e.classList.toggle(f);var t=e.querySelector(".accordion__action");t.innerHTML="Expand"===t.innerHTML?"Collapse":"Expand",h("Accordion Toggled",{title:e.querySelector(".accordion__title").innerText,status:e.classList.contains(f)?"collapsed":"expanded"})}var g=Object.freeze({setup:function(){for(var e=document.getElementsByClassName("accordion"),t=0;t<e.length;t+=1){var n=e[t];n.querySelector(".accordion__button").addEventListener("click",v.bind(this,n))}}});var y=Object.freeze({setup:function(){var e=document.getElementById("showNav");e&&(e.onclick=function(){document.getElementById("sphinxsidebar").style.display="block",document.getElementById("left-column").style.display="flex",document.getElementById("showNav").style.display="none"});var t=document.getElementById("closeNav");t&&(t.onclick=function(){document.getElementById("showNav").style.display="flex",document.getElementById("left-column").style.display="none"})}});function b(e){!function(e){return Boolean(e.getElementsByClassName("linenos").length)}(e)?function(e){return Boolean(e.getElementsByClassName("caption-text").length)}(e)&&function(e){var t=e.getElementsByClassName("button-row")[0],n=e.getElementsByClassName("code-block-caption")[0];n.parentNode.insertBefore(t,n.nextSibling)}(e):function(e){var t=e.getElementsByClassName("button-row")[0],n=e.getElementsByClassName("highlighttable")[0].childNodes[0],r=document.createElement("tr"),a=document.createElement("td"),o=document.createElement("td");a.className="linenos-button-row-spacer",n.insertBefore(r,n.firstChild),r.appendChild(a),r.appendChild(o),o.appendChild(t)}(e)}var w=Object.freeze({setup:function(){for(var e=document.getElementsByClassName("button-code-block"),t=0,n=e.length;t<n;t++){var r=e[t];Boolean(r.getElementsByClassName("button-row")[0])&&b(r)}}}),S="code-button__tooltip--active",_="code-button__tooltip--inactive";function C(e){return Boolean(e.getElementsByClassName("copyable-code-block")[0])}var k=Object.freeze({setup:function(){for(var e=c(document.getElementsByClassName("button-code-block")).filter(C),n=function(t,n){var r=e[t],a=r.getElementsByClassName("highlight")[0];if(!a)return{v:void 0};var o=r.getElementsByClassName("button-row")[0].getElementsByClassName("code-button--copy")[0];if(!o)return{v:void 0};var s=document.createElement("div");s.innerText="copied",s.classList.add("code-button__tooltip"),s.classList.add(_);var i=-1;o.appendChild(s),o.addEventListener("click",function(){var e=document.createElement("textarea");e.style.position="fixed",document.body.appendChild(e);var t,n,r,o=a.innerText.trim();e.value=o,e.select();try{if(!document.execCommand("copy"))throw new Error("Failed to copy");s.classList.replace(_,S),t=function(){s.classList.replace(S,_)},r=1500,(n=i)>=0&&window.clearTimeout(n),i=window.setTimeout(t,r)}catch(e){console.error(e)}document.body.removeChild(e),h("Codeblock Copied",{code:o})})},r=0,a=e.length;r<a;r++){var o=n(r);if("object"===(void 0===o?"undefined":t(o)))return o.v}}});function E(e){h("Link Clicked",{text:e.text,href:e.href})}var x=Object.freeze({setup:function(){if(document.body.dataset&&"ecosystem"===document.body.dataset.project&&[].includes(window.location.href))for(var e=document.querySelectorAll("a.external"),t=0;t<e.length;t+=1){var n=e[t];n.addEventListener("click",E.bind(this,n))}}});window.addEventListener("hashchange",function(){if(window.location.hash){var e=document.getElementById(window.location.hash.slice(1));e&&e.scrollIntoView(!0)}});var N=Object.freeze({setup:function(e){var t=$("body").attr("data-project");if("stitch"===t||"realm"===t)return!1;if(void 0===window.history||void 0===document.querySelectorAll||void 0===document.body.classList||void 0===(new XMLHttpRequest).responseURL)return!1;var n=document.querySelector(".sphinxsidebarwrapper"),r=document.querySelector(".body"),a={};function o(){void 0!==a.timeoutID&&window.clearTimeout(a.timeoutID),void 0!==a.xhr&&a.xhr.abort(),a={}}function s(t,s){void 0===t&&console.error("Going to undefined path"),o(),r.classList.add("loading"),a.timeoutID=window.setTimeout(function(){r.classList.remove("loading"),a.timeoutID=-1},1e4);var i=new Date;a.xhr=function(e,t){var n=new XMLHttpRequest;n.onload=function(){n.status>=200&&n.status<400?(t.success(n.responseText,n.responseURL),t.complete()):(t.error(),t.complete())},n.onerror=function(){t.error(),t.complete()},n.open("GET",e,!0);try{n.send()}catch(e){t.error(),t.complete()}}(t,{complete:function(){o()},error:function(e){console.error("Failed to load "+t),window.location=t},success:function(t,a){var o=new Date-i;r.classList.remove("loading"),s&&a!==window.location.href&&window.history.pushState({href:a},"",a);var l=document.createElement("html");l.innerHTML=t;var u=l.querySelector("title").textContent,d=l.querySelector(".body"),c=l.querySelector(".sphinxsidebarwrapper");o>62.5&&d.classList.add("loading"),r.parentElement.replaceChild(d,r),r=d,n.parentElement.replaceChild(c,n),n=c,document.title=u,e.update(),window.history.onnavigate&&window.history.onnavigate(),window.setTimeout(function(){r.classList.remove("loading"),s&&window.scroll(0,0)},1)}})}window.history.replaceState({href:window.location.href},document.querySelector("title").textContent,window.location.href);var i=document.querySelectorAll(".sphinxsidebarwrapper > ul a.reference.internal");function l(e){0!==e.button||e.shiftKey||e.altKey||e.metaKey||e.ctrlKey||(e.preventDefault(),s(e.currentTarget.href,!0))}for(var u=0;u<i.length;u+=1){var c=i[u];(d($(c))||p($(c)))&&c.addEventListener("click",l)}return window.onpopstate=function(e){null!==e.state&&s(e.state.href,!1)},!0}});var T="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function I(){}function O(){}O.resetWarningCache=I;var L,B=(function(e){e.exports=function(){function e(e,t,n,r,a,o){if(o!==T){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:O,resetWarningCache:I};return n.PropTypes=n,n}()}(L={exports:{}},L.exports),L.exports),A=function(){},D={},R=[],P=[];function j(e,t){var n,r,a,o,s=P;for(o=arguments.length;o-- >2;)R.push(arguments[o]);for(t&&null!=t.children&&(R.length||R.push(t.children),delete t.children);R.length;)if((r=R.pop())&&void 0!==r.pop)for(o=r.length;o--;)R.push(r[o]);else"boolean"==typeof r&&(r=null),(a="function"!=typeof e)&&(null==r?r="":"number"==typeof r?r=String(r):"string"!=typeof r&&(a=!1)),a&&n?s[s.length-1]+=r:s===P?s=[r]:s.push(r),n=a;var i=new A;return i.nodeName=e,i.children=s,i.attributes=null==t?void 0:t,i.key=null==t?void 0:t.key,i}function U(e,t){for(var n in t)e[n]=t[n];return e}var q="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;var H=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,M=[];function V(e){!e._dirty&&(e._dirty=!0)&&1==M.push(e)&&q(W)}function W(){var e,t=M;for(M=[];e=t.pop();)e._dirty&&ue(e)}function F(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function z(e){var t=U({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function Y(e){var t=e.parentNode;t&&t.removeChild(e)}function G(e,t,n,r,a){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),r&&r(e);else if("class"!==t||a)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var o in n)o in r||(e.style[o]="");for(var o in r)e.style[o]="number"==typeof r[o]&&!1===H.test(o)?r[o]+"px":r[o]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var s=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,J,s):e.removeEventListener(t,J,s),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!a&&t in e){try{e[t]=null==r?"":r}catch(e){}null!=r&&!1!==r||"spellcheck"==t||e.removeAttribute(t)}else{var i=a&&t!==(t=t.replace(/^xlink:?/,""));null==r||!1===r?i?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(i?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function J(e){return this._listeners[e.type](e)}var Z=[],K=0,Q=!1,X=!1;function ee(){for(var e;e=Z.pop();)e.componentDidMount&&e.componentDidMount()}function te(e,t,n,r,a,o){K++||(Q=null!=a&&void 0!==a.ownerSVGElement,X=null!=e&&!("__preactattr_"in e));var s=ne(e,t,n,r,o);return a&&s.parentNode!==a&&a.appendChild(s),--K||(X=!1,o||ee()),s}function ne(e,t,n,r,a){var o=e,s=Q;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||a)?e.nodeValue!=t&&(e.nodeValue=t):(o=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(o,e),re(e,!0))),o.__preactattr_=!0,o;var i,l,u=t.nodeName;if("function"==typeof u)return function(e,t,n,r){var a=e&&e._component,o=a,s=e,i=a&&e._componentConstructor===t.nodeName,l=i,u=z(t);for(;a&&!l&&(a=a._parentComponent);)l=a.constructor===t.nodeName;a&&l&&(!r||a._component)?(le(a,u,3,n,r),e=a.base):(o&&!i&&(de(o),e=s=null),a=se(t.nodeName,u,n),e&&!a.nextBase&&(a.nextBase=e,s=null),le(a,u,1,n,r),e=a.base,s&&e!==s&&(s._component=null,re(s,!1)));return e}(e,t,n,r);if(Q="svg"===u||"foreignObject"!==u&&Q,u=String(u),(!e||!F(e,u))&&(i=u,(l=Q?document.createElementNS("http://www.w3.org/2000/svg",i):document.createElement(i)).normalizedNodeName=i,o=l,e)){for(;e.firstChild;)o.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(o,e),re(e,!0)}var d=o.firstChild,c=o.__preactattr_,p=t.children;if(null==c){c=o.__preactattr_={};for(var h=o.attributes,m=h.length;m--;)c[h[m].name]=h[m].value}return!X&&p&&1===p.length&&"string"==typeof p[0]&&null!=d&&void 0!==d.splitText&&null==d.nextSibling?d.nodeValue!=p[0]&&(d.nodeValue=p[0]):(p&&p.length||null!=d)&&function(e,t,n,r,a){var o,s,i,l,u,d=e.childNodes,c=[],p={},h=0,m=0,f=d.length,v=0,g=t?t.length:0;if(0!==f)for(var y=0;y<f;y++){var b=d[y],w=b.__preactattr_,S=g&&w?b._component?b._component.__key:w.key:null;null!=S?(h++,p[S]=b):(w||(void 0!==b.splitText?!a||b.nodeValue.trim():a))&&(c[v++]=b)}if(0!==g)for(var y=0;y<g;y++){l=t[y],u=null;var S=l.key;if(null!=S)h&&void 0!==p[S]&&(u=p[S],p[S]=void 0,h--);else if(m<v)for(o=m;o<v;o++)if(void 0!==c[o]&&(_=s=c[o],k=a,"string"==typeof(C=l)||"number"==typeof C?void 0!==_.splitText:"string"==typeof C.nodeName?!_._componentConstructor&&F(_,C.nodeName):k||_._componentConstructor===C.nodeName)){u=s,c[o]=void 0,o===v-1&&v--,o===m&&m++;break}u=ne(u,l,n,r),i=d[y],u&&u!==e&&u!==i&&(null==i?e.appendChild(u):u===i.nextSibling?Y(i):e.insertBefore(u,i))}var _,C,k;if(h)for(var y in p)void 0!==p[y]&&re(p[y],!1);for(;m<=v;)void 0!==(u=c[v--])&&re(u,!1)}(o,p,n,r,X||null!=c.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||G(e,r,n[r],n[r]=void 0,Q);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||G(e,r,n[r],n[r]=t[r],Q)}(o,t.attributes,c),Q=s,o}function re(e,t){var n=e._component;n?de(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||Y(e),ae(e))}function ae(e){for(e=e.lastChild;e;){var t=e.previousSibling;re(e,!0),e=t}}var oe=[];function se(e,t,n){var r,a=oe.length;for(e.prototype&&e.prototype.render?(r=new e(t,n),ce.call(r,t,n)):((r=new ce(t,n)).constructor=e,r.render=ie);a--;)if(oe[a].constructor===e)return r.nextBase=oe[a].nextBase,oe.splice(a,1),r;return r}function ie(e,t,n){return this.constructor(e,n)}function le(e,t,n,r,a){e._disable||(e._disable=!0,e.__ref=t.ref,e.__key=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||a?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r)),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===D.syncComponentUpdates&&e.base?V(e):ue(e,1,a)),e.__ref&&e.__ref(e))}function ue(e,t,n,r){if(!e._disable){var a,o,s,i=e.props,l=e.state,u=e.context,d=e.prevProps||i,c=e.prevState||l,p=e.prevContext||u,h=e.base,m=e.nextBase,f=h||m,v=e._component,g=!1,y=p;if(e.constructor.getDerivedStateFromProps&&(l=U(U({},l),e.constructor.getDerivedStateFromProps(i,l)),e.state=l),h&&(e.props=d,e.state=c,e.context=p,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(i,l,u)?g=!0:e.componentWillUpdate&&e.componentWillUpdate(i,l,u),e.props=i,e.state=l,e.context=u),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!g){a=e.render(i,l,u),e.getChildContext&&(u=U(U({},u),e.getChildContext())),h&&e.getSnapshotBeforeUpdate&&(y=e.getSnapshotBeforeUpdate(d,c));var b,w,S=a&&a.nodeName;if("function"==typeof S){var _=z(a);(o=v)&&o.constructor===S&&_.key==o.__key?le(o,_,1,u,!1):(b=o,e._component=o=se(S,_,u),o.nextBase=o.nextBase||m,o._parentComponent=e,le(o,_,0,u,!1),ue(o,1,n,!0)),w=o.base}else s=f,(b=v)&&(s=e._component=null),(f||1===t)&&(s&&(s._component=null),w=te(s,a,u,n||!h,f&&f.parentNode,!0));if(f&&w!==f&&o!==v){var C=f.parentNode;C&&w!==C&&(C.replaceChild(w,f),b||(f._component=null,re(f,!1)))}if(b&&de(b),e.base=w,w&&!r){for(var k=e,E=e;E=E._parentComponent;)(k=E).base=w;w._component=k,w._componentConstructor=k.constructor}}for(!h||n?Z.unshift(e):g||e.componentDidUpdate&&e.componentDidUpdate(d,c,y);e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);K||r||ee()}}function de(e){var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?de(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,Y(t),oe.push(e),ae(t)),e.__ref&&e.__ref(null)}function ce(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{},this._renderCallbacks=[]}U(ce.prototype,{setState:function(e,t){this.prevState||(this.prevState=this.state),this.state=U(U({},this.state),"function"==typeof e?e(this.state,this.props):e),t&&this._renderCallbacks.push(t),V(this)},forceUpdate:function(e){e&&this._renderCallbacks.push(e),ue(this,2)},render:function(){}});var pe={h:j,createElement:j,cloneElement:function(e,t){return j(e.nodeName,U(U({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)},Component:ce,render:function(e,t,n){return te(n,e,{},!1,t,!1)},rerender:W,options:D},he=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={error:!1,text:""},r.handleChange=r.handleChange.bind(r),r}return s(t,e),r(t,[{key:"handleChange",value:function(e){var t=this.props,n=t.hasError,r=t.store,a=e.target.value,o=n(a);o?(r.set(""),e.target.setCustomValidity(o)):(r.set(a),e.target.setCustomValidity("")),this.setState({error:o,text:a})}},{key:"render",value:function(){var e=this.props,t=e.errorText,n=e.placeholder,r=this.state,a=r.error,o=r.text;return pe.h("div",null,pe.h("textarea",{placeholder:n,onInput:this.handleChange,value:o}),pe.h("div",{className:"error",style:{visibility:a?"visible":"hidden"}},t))}}]),t}(pe.Component);he.propTypes={errorText:B.string,hasError:B.func,placeholder:B.string,store:B.objectOf(B.func).isRequired},he.defaultProps={hasError:function(){return!1}};var me=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={error:!1,text:""},r.handleChange=r.handleChange.bind(r),r}return s(t,e),r(t,[{key:"handleChange",value:function(e){var t=this.props,n=t.hasError,r=t.store,a=e.target.value,o=n(a);o?(r.set(""),e.target.setCustomValidity(o)):(r.set(a),e.target.setCustomValidity("")),this.setState({error:o,text:a})}},{key:"render",value:function(){var e=this.props,t=e.errorText,n=e.inputType,r=e.placeholder,a=this.state,o=a.error,s=a.text;return pe.h("div",null,pe.h("input",{onInput:this.handleChange,placeholder:r,type:n,value:s}),pe.h("div",{className:"error",style:{visibility:o?"visible":"hidden"}},t))}}]),t}(pe.Component);me.propTypes={errorText:B.string,hasError:B.func,inputType:B.string,placeholder:B.string,store:B.objectOf(B.func).isRequired},me.defaultProps={hasError:function(){return!1},inputType:"text"};var fe="Initial",ve=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={closed:!1,state:fe},r.onSubmitFeedback=r.onSubmitFeedback.bind(r),r.onInitialVote=r.onInitialVote.bind(r),r.toggleVisibility=r.toggleVisibility.bind(r),r}return s(t,e),r(t,[{key:"componentDidMount",value:function(){var e=JSON.parse(window.sessionStorage.getItem("feedbackHidden"));e&&this.setState({closed:e})}},{key:"onSubmitFeedback",value:function(){this.props.onSubmitFeedback(this.state.state),this.setState({state:"Voted"})}},{key:"onInitialVote",value:function(e,t){window.open("https://discord.gg/yn3fm8bjWU","_blank")}},{key:"toggleVisibility",value:function(e){var t=this,n=this.state,r=n.closed,a=n.state;e.stopPropagation(),"boolean"!=typeof a&&"Voted"!==a||!1!==r||this.setState({state:fe}),this.setState(function(e){return{closed:!e.closed}},function(){return window.sessionStorage.setItem("feedbackHidden",JSON.stringify(t.state.closed))})}},{key:"render",value:function(e,t){var n=this,r=(e.children,e.canShowSuggestions,e.voteAcknowledgement,t.closed),a=t.state,o=a===fe?"deluge-body":"deluge-body deluge-body-expanded",s=a!==fe&&!1===r?"deluge deluge-expanded":"deluge";return pe.h("div",{class:s},r?pe.h("div",{class:"deluge-header deluge-header-minimized",onClick:this.toggleVisibility},pe.h("span",{class:"fa fa-angle-up deluge-open-icon"})):pe.h("div",null,pe.h("div",{class:"deluge-header"},pe.h("span",{class:"fa fa-angle-down deluge-close-icon-hidden"}),pe.h("span",{class:"deluge-helpful"},"Need more info?"),pe.h("span",{class:"fa fa-angle-down deluge-close-icon",onClick:this.toggleVisibility})),pe.h("div",{class:"deluge-vote"},pe.h("a",{key:"voteup",id:"rate-up",onClick:function(e){return n.onInitialVote(e,!0)}},"JOIN DISCORD")),pe.h("div",{class:o})))}}]),t}(pe.Component);ve.propTypes={error:B.bool.isRequired,onSubmitFeedback:B.func.isRequired,onSubmitVote:B.func.isRequired,onClear:B.func.isRequired,children:B.arrayOf(B.node),voteAcknowledgement:B.string,handleOpenDrawer:B.func.isRequired,canShowSuggestions:B.bool.isRequired};var ge=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=window.crypto||window.msCrypto,o=new Uint8Array(16);return a.getRandomValues(o),r.state={answers:{},emailError:!1,interactionId:btoa(Array.prototype.map.call(o,function(e){return String.fromCharCode(e)}).join("")).slice(0,-2),voteAcknowledgement:null},r.onSubmitFeedback=r.onSubmitFeedback.bind(r),r.onSubmitVote=r.onSubmitVote.bind(r),r}return s(t,e),r(t,[{key:"sendAnalytics",value:function(e,t){try{var n=window.analytics.user(),r=n.id();r?t.segmentUID=r.toString():t.segmentAnonymousID=n.anonymousId().toString(),window.analytics.track(e,t)}catch(e){console.error(e)}return t}},{key:"onSubmitVote",value:function(e){var t=this;this.sendVote(e).then(function(n){t.setState({voteAcknowledgement:e?"up":"down"})}).catch(function(e){console.error(e)})}},{key:"sendVote",value:function(e){}},{key:"onSubmitFeedback",value:function(e){for(var t={},n=this.state.answers,r=Object.keys(n),a=0;a<r.length;a+=1){var o=r[a];(n[o]||!1===n[o])&&(t[o]=n[o])}this.sendFeedback(e,t).catch(function(e){console.error(e)})}},{key:"sendFeedback",value:function(e,t){}},{key:"makeStore",value:function(e){var t=this;return{get:function(){return t.state.answers[e]},set:function(n){return t.setState(function(t){return{answers:o({},t.answers,a({},e,n))}})}}}},{key:"validateEmail",value:function(e){var t=!(""===e||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e));return this.setState({emailError:t}),t}},{key:"render",value:function(e,t){var n=this,r=t.voteAcknowledgement,a=0===Object.keys(this.state.answers).length||Object.values(this.state.answers).every(function(e){return""===e})||this.state.emailError;return pe.h(ve,{voteAcknowledgement:r,onSubmitFeedback:this.onSubmitFeedback,onSubmitVote:this.onSubmitVote,onClear:function(){return n.setState({answers:{}})},canShowSuggestions:e.canShowSuggestions,i:!0,handleOpenDrawer:e.handleOpenDrawer,error:a},pe.h(he,{errorText:"Please respond with at least 15 characters.",store:this.makeStore("reason"),placeholder:"What are you trying to do?"}),pe.h("div",{className:"caption"},"May we contact you about your feedback?"),pe.h(me,{errorText:"Please enter a valid email address.",hasError:function(e){return n.validateEmail(e)},inputType:"email",store:this.makeStore("email"),placeholder:"Email address"}))}}]),t}(pe.Component);function ye(e){var t,n,r=e.suggestion,a=(t=r.url,n=this.props.pageName,t+"?suggestor="+encodeURIComponent(n));return pe.h("div",{className:"suggestion-card"},pe.h("a",{href:a},pe.h("div",null,pe.h("h2",null,r.title),r.description&&pe.h("p",null,r.description))))}function be(e){var t=e.handleDismissCard;return pe.h("div",{className:"suggestion-card suggestion-close",onClick:function(){return t()}},pe.h("h2",null,"This isn't what I was looking for"))}ge.propTypes={project:B.string.isRequired,path:B.string.isRequired,canShowSuggestions:B.bool.isRequired,handleOpenDrawer:B.func.isRequired};var we=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),r(t,[{key:"render",value:function(){var e=this,t=this.props.suggestions.map(function(t){return pe.h(ye,{suggestion:t,key:t.url,pageName:e.props.pageName})});return pe.h("div",null,t,pe.h(be,{handleDismissCard:this.props.handleDismissCard}))}}]),t}(pe.Component);ye.propTypes={pageName:B.string.isRequired,suggestion:B.object.isRequired},be.propTypes={handleDismissCard:B.func.isRequired},we.propTypes={suggestions:B.array.isRequired,handleDismissCard:B.func.isRequired,pageName:B.string.isRequired};var Se=function(e){function t(e){n(this,t);var r,a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleCloseDrawer=a.handleCloseDrawer.bind(a),a.handleDismissCard=a.handleDismissCard.bind(a),a.pageName=(r=document.getElementsByClassName("body")).length?r[0].getAttribute("data-pagename"):null,a.state={isLoaded:!1,showThankYouMessage:!1,suggestions:[]},a}return s(t,e),r(t,[{key:"handleCloseDrawer",value:function(){this.props.handleCloseDrawer(),h("Suggestion Drawer Closed",{userDismissedSuggestions:this.state.showThankYouMessage})}},{key:"handleDismissCard",value:function(){this.setState({showThankYouMessage:!0}),h("Suggestions Dismissed")}},{key:"render",value:function(){var e=this,t=this.props.drawerIsOpen?"is-open":"",n=void 0;return n=this.state.showThankYouMessage?pe.h("div",null,pe.h("span",{onClick:function(){return e.handleCloseDrawer()},class:"fa fa-times suggestion-close suggestion-close-button"}),pe.h("h1",null,"Thanks for your feedback."),pe.h("p",null,"We'll use it to make more helpful suggestions in the future.")):pe.h("div",null,pe.h("span",{onClick:function(){return e.handleCloseDrawer()},class:"fa fa-times suggestion-close suggestion-close-button"}),pe.h("h1",null,"Need help?"),pe.h("p",null,"Other MongoDB users have found these resources useful."),pe.h(we,{suggestions:this.state.suggestions,handleDismissCard:this.handleDismissCard,pageName:this.pageName})),pe.h("div",{className:"suggestion "+t},n)}}]),t}(pe.Component);Se.propTypes={drawerIsOpen:B.bool.isRequired,handleCloseDrawer:B.func.isRequired};var _e=[],Ce=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isSuggestionPage=r.isSuggestionPage(r.props.path),r.handleOpenDrawer=r.handleOpenDrawer.bind(r),r.handleCloseDrawer=r.handleCloseDrawer.bind(r),r.state={drawerIsOpen:!1,drawerHasOpened:!1},r}return s(t,e),r(t,[{key:"isSuggestionPage",value:function(e){return _e.indexOf(e)>=0}},{key:"handleOpenDrawer",value:function(){this.state.drawerHasOpened||this.setState(function(e){return{drawerIsOpen:!0,drawerHasOpened:!0}})}},{key:"handleCloseDrawer",value:function(){this.setState(function(e){return{drawerIsOpen:!1}})}},{key:"render",value:function(){return pe.h("div",null,pe.h(ge,{project:this.props.project,path:this.props.path,handleOpenDrawer:this.handleOpenDrawer,canShowSuggestions:this.isSuggestionPage}),this.isSuggestionPage&&pe.h(Se,{drawerIsOpen:this.state.drawerIsOpen,handleCloseDrawer:this.handleCloseDrawer}))}}]),t}(pe.Component);Ce.propTypes={project:B.string.isRequired,path:B.string.isRequired};var ke=null,Ee=null,xe=["meta/404","search"];var Ne=Object.freeze({init:function(){ke=document.body.getAttribute("data-project"),Ee=document.getElementById("rating-panel")},setup:function(){if(void 0!==window.localStorage){var e=function(){var e=document.getElementsByClassName("body");if(!e.length)return null;var t=e[0].getAttribute("data-pagename");return xe.indexOf(t)>=0?null:e[0].getAttribute("data-eol")?null:t}();Ee&&function(e,t,n){pe.render("",n,n._widgetsRendered),t&&(n._widgetsRendered=pe.render(pe.h(Ce,{project:e,path:t}),n))}(ke,e,Ee)}}}),Te=new m;function Ie(){return JSON.parse(window.localStorage.getItem("tabPref"))||{}}function Oe(e,t){var n=Ie();t?(n.pages||(n.pages={}),n.pages[window.location.pathname]=e.tabId):n[e.type]=e.tabId,window.localStorage.setItem("tabPref",JSON.stringify(n))}var $e={},Le=function(){function e(t,r,a,o){n(this,e),this.type=t,this.tabStrips=a,this.tabContents=o,this.anonymous=r,this.tabIds={}}return r(e,[{key:"getFirstTabId",value:function(){var e=this.tabStrips[0].querySelector(".tab-strip__element[aria-selected=true]");return e?e.getAttribute("data-tabid"):null}},{key:"setup",value:function(){var e=this;if(0!==this.tabStrips.length){!function(){if(document.querySelector(".tabs-top")){var e=$(".tab-strip--singleton"),t=e.first();e.slice(1).detach(),t.detach().insertAfter("h1").first()}}();for(var t=0,n=this.tabStrips,r=n.length;t<r;t++)for(var a=function(t,n,r){var a=n[t];e.tabIds[a.getAttribute("data-tabid")]=!0,a.onclick=function(t){var n=a.getBoundingClientRect(),r=window.scrollY-n.y,o=t.target.getAttribute("data-tabid"),s={};if(s.tabId=o,s.type=e.type,o){e.update(o,!0);var i=a.getBoundingClientRect();window.scrollTo(i.x,i.y+r),h("Tab Selected",{tabId:o,title:t.target.innerText,tabSet:e.type}),t.preventDefault()}}},o=0,s=n[t].querySelectorAll("[data-tabid]"),i=s.length;o<i;o++)a(o,s);this.update(null,!1)}}},{key:"update",value:function(e,t){if(0!==this.tabStrips.length){if(!e){var n=Ie();this.anonymous&&n.pages&&n.pages[window.location.pathname]?e=n.pages[window.location.pathname]:n[this.type]&&(e=n[this.type])}(e&&this.tabIds[e]||(e=this.getFirstTabId()))&&Te.dispatch({isUserAction:t,tabId:e,type:this.type})}}},{key:"showHideSelectedTab",value:function(e){for(var t=0,n=this.tabStrips,r=n.length;t<r;t++){var a=n[t],o=$(a.querySelector('[data-tabid="'+e+'"]'));if(o.length){var s=o.parent("ul"),i=$(a.querySelector(".dropdown-toggle")),l=$(a.querySelector(".dropdown"));s.hasClass("dropdown-menu")?(i.text(""+o.first().text()).append('<span class="caret"></span>'),l.attr("aria-selected",!0).siblings().attr("aria-selected",!1)):(o.attr("aria-selected",!0).siblings().attr("aria-selected",!1),i.text("Other ").append('<span class="caret"></span>'))}}for(var u="tabpanel-"+e,d=0,c=this.tabContents,p=c.length;d<p;d++)for(var h=0,m=c[d].children,f=m.length;h<f;h++){var v=m[h];v.classList.contains(u)?v.style.display="block":v.style.display="none"}}}],[{key:"register",value:function(t){var n=c(t.getElementsByClassName("tab-strip--singleton")),r=t.querySelector(".tabs__content"),a=t.getAttribute("data-tab-preference"),o=!1;if(!a){var s=t.querySelector("[data-tabid]");if(!s)return;a="anonymous-"+s.getAttribute("data-tabid"),o=!0}if($e[a]){var i=$e[a];return i.tabStrips=i.tabStrips.concat(n),void i.tabContents.push(r)}var l=new e(a,o,n,[r],!1);$e[a]=l}}]),e}();Te.listen(function(e){var t=$e[e.type];t&&(e.isUserAction&&Oe(e,t.anonymous),t.showHideSelectedTab(e.tabId))});var Be=Object.freeze({tabsEventDispatcher:Te,getTabPref:Ie,setTabPref:Oe,setup:function(){$e={};for(var e=document.getElementsByClassName("tabs"),t=0;t<e.length;t+=1)Le.register(e[t]);for(var n=0,r=Object.keys($e),a=r.length;n<a;n++){var o=r[n];$e[o].setup()}}}),Ae=[];function De(){var e=document.body.clientHeight-window.innerHeight,t=document.documentElement.scrollTop/e;t=(document.documentElement.scrollTop+.8*t*window.innerHeight)/e;for(var n=[1/0,null],r=0,a=Ae.length;r<a;r++){var o=l(Ae[r],2),s=o[0],i=o[1];i.classList.remove("active");var u=s.offsetTop/e,d=Math.abs(u-t);d<=n[0]&&(n=[d,i])}n[1]&&n[1].classList.add("active")}function Re(e){var t=e.target.getAttribute("data-tab-preference");t&&Oe({tabId:t,type:"languages"},!1)}document.addEventListener("scroll",function(e,t){var n=null,r=null,a=null,o=0;function s(){o=Date.now(),a=null,r=e.apply.apply(e,u(n)),a||(n=null)}return function(){for(var i=Date.now(),l=t-(i-o),d=arguments.length,c=Array(d),p=0;p<d;p++)c[p]=arguments[p];return n=c,l<=0||l>t?(a&&(window.clearTimeout(a),a=null),o=i,r=e.apply(void 0,u(n)),a||(n=null)):a||(a=window.setTimeout(s,l)),r}}(De,150));var Pe=document.getElementsByClassName("show-current-language");Te.listen(function(e){if("languages"===e.type)for(var t=0;t<Pe.length;t+=1)Pe[t].innerText=e.tabId});var je=Object.freeze({setup:function(){!function(){var e=document.querySelector(".left-toc");if(e){Ae.length=0;for(var t=0,n=e.querySelectorAll("a"),r=n.length;t<r;t++){var a=n[t],o=a.getAttribute("href").slice(1);if(o){var s=document.getElementById(o);s&&Ae.push([s,a.parentElement])}}De()}}(),function(){var e=document.getElementsByClassName("guide-category-list")[0];if(e)for(var t=e.getElementsByClassName("guide__pill"),n=0;n<t.length;n+=1)t[n].onclick=Re}()}}),Ue="lightbox__content--activated",qe="lightbox__content--scalable",He=document.createElement("div");He.className="lightbox__modal",He.title="click to close";var Me=document.createElement("img");function Ve(e){"keydown"===e.type&&"Escape"!==e.key||(Me.classList.remove(Ue),He.parentNode&&He.parentNode.removeChild(He))}function We(e){var t=document.createElement("div"),n=document.createElement("div");t.className="lightbox__imageWrapper",n.className="lightbox__caption",n.innerText="click to enlarge",e.parentNode.replaceChild(t,e),t.appendChild(e),t.appendChild(n),t.addEventListener("click",function(){document.body.appendChild(He),Me.src=e.src,Me.alt=e.alt+" — Enlarged",/\.svg$/.test(Me.src)?Me.classList.add(qe):Me.classList.remove(qe),He.addEventListener("click",Ve),setTimeout(function(){Me.classList.add(Ue)},0)})}function Fe(e,t){var n=t.naturalWidth*t.naturalHeight;t.clientWidth*t.clientHeight<.9*n&&(We(t),e.classList.add("lightbox"))}Me.className="lightbox__content",He.appendChild(Me);var ze=Object.freeze({setup:function(){for(var e=0,t=document.getElementsByClassName("lightbox"),n=t.length;e<n;e++){var r=t[e];0!==r.children.length&&"IMG"===r.children[0].tagName&&We(r.children[0])}for(var a=0,o=document.getElementsByClassName("figure"),s=o.length;a<s;a++){var i=o[a];if(0!==i.children.length&&"IMG"===i.children[0].tagName&&!i.classList.contains("lightbox")){var l=i.children[0];l.complete?Fe(i,l):l.addEventListener("load",Fe.bind(null,i,l))}}document.addEventListener("keydown",Ve)}}),Ye="apiref-resource--collapsed";function Ge(e,t){var n=null;e.addEventListener("mousedown",function(e){0===e.button&&(n=e)}),e.addEventListener("mouseup",function(e){if(0===e.button){var r=n;n=null,(!r||Math.abs(e.clientX-r.clientX)<50&&Math.abs(e.clientY-r.clientY)<50)&&t()}})}function Je(e,t){if(t.id){var n="#"+t.id;window.history.pushState({href:n},"",n)}t.classList[e](Ye)}function Ze(){var e=document.location.hash.slice(1);if(e){var t=document.getElementById(e);t&&t.classList.contains("apiref-resource")&&Je("remove",t)}}window.addEventListener("hashchange",Ze,!1);var Ke=Object.freeze({setup:function(){for(var e=document.getElementsByClassName("apiref-resource__header"),t=0;t<e.length;t+=1){var n=e[t];Ge(n,Je.bind(null,"toggle",n.parentElement))}Ze()}});var Qe=Object.freeze({setup:function(){var e=document.querySelectorAll("a.external");e&&e.forEach(function(e){e.setAttribute("target","_blank")})}});function Xe(e,t){var n=t.target.getAttribute("data-tabid");Te.dispatch({isUserAction:!0,tabId:n,type:e}),h("Pill Selected",{tabId:n,title:t.target.innerText,pillSet:e})}var et={};Te.listen(function(e){for(var t=0,n=et[e.type]||[],r=n.length;t<r;t++)for(var a=n[t].getElementsByClassName("guide__pill"),o=0;o<a.length;o+=1){a[o].getAttribute("data-tabid")===e.tabId?a[o].classList.add("guide__pill--active"):a[o].classList.remove("guide__pill--active")}});var tt=Object.freeze({setup:function(){et={};for(var e=0,t=document.querySelectorAll(".pillstrip-declaration"),n=t.length;e<n;e++){var r=t[e],a=r.getAttribute("data-tab-preference");a&&(void 0===et[a]&&(et[a]=[]),et[a].push(r))}for(var o=0,s=Object.keys(et),i=s.length;o<i;o++){for(var u=s[o],d=et[u],p=document.querySelectorAll('.tabs[data-tab-preference="'+u+'"] > .tab-strip'),h={},m=[],f=0,v=p.length;f<v;f++){var g=p[f];g.style.display="none";for(var y=-1,b=c(g.querySelectorAll(".tab-strip__element[data-tabid]")),w=0,S=b=b.concat(c(g.querySelectorAll(".tab-strip__dropdown > li"))),_=S.length;w<_;w++){var C=S[w];y+=1;var k=C.getAttribute("data-tabid");void 0===h[k]&&(h[k]=!0,m.splice(y,0,[k,C.innerText]))}}for(var E=Xe.bind(void 0,u),x=0,N=d.length;x<N;x++)for(var T=d[x],I=0,O=m.length;I<O;I++){var $=l(m[I],2),L=$[0],B=$[1],A=document.createElement("li");A.className="guide__pill",A.setAttribute("data-tabid",L),A.innerText=B,A.onclick=E,T.appendChild(A)}}}});function nt(e){return e.hasClass("current")}var rt=Object.freeze({setup:function(){var e=$("body").attr("data-project");if("stitch"!==e&&"realm"!==e){var t=$(".sidebar a.current");(d(t)||p(t)||nt(t))&&t.parent("li").addClass("selected-item"),t.parents("ul").each(function(e,t){$(t).css("display","block")}),$(".sphinxsidebarwrapper > ul li:not(.current) > ul:not(.current)").hide(),$(".sphinxsidebarwrapper").show(),$(".sphinxsidebarwrapper .toctree-l1").on("click","a",function(e){var n=$(e.currentTarget);d(n)||!n.parent().hasClass("selected-item")&&p(n)||(e.preventDefault(),n.parent().hasClass("current")?(n.parent().removeClass("current selected-item"),n.siblings("ul").slideUp()):(t.parent().removeClass("selected-item"),t.parents().add(t.siblings("ul")).each(function(t,n){var r=$(n);r.has(e.currentTarget).length||(r.is("ul")?r.removeClass("current").slideUp():r.removeClass("current"))}),n.parent().addClass("current"),n.siblings("ul").slideDown(function(){(d(n)||p(n)||nt(t))&&n.parent("li").addClass("selected-item")}),t=n))}),$(".sphinxsidebarwrapper > ul ul a.reference").prepend(function(e){var t=$('<span class="expand-icon"></span>');return d($(this))||t.addClass("docs-expand-arrow"),t})}}}),at=400;$(".sidebar a.current");function ot(e){return e.hasClass("current")}function st(e){e.preventDefault();var t,n=$(e.currentTarget).parent();function r(e){var t=e.children("h3"),n=e.children(":not(h3)");t.removeClass("open"),n.stop().slideUp(at,function(){e.add(e.children()).removeClass("current")})}ot(n)?r(n):(r($("li.toctree-l1.current")),(t=n).add(t.children()).addClass("current"),t.children("ul.toc-section-root").stop().slideDown(at))}function it(e){e.preventDefault();var t,n,r,a=$(e.currentTarget).parent();ot(a)?(n=(t=a).children("h4, h5"),r=t.children(":not(h4, h5)"),n.removeClass("open"),r.stop().slideUp(at,function(){t.add(t.children()).removeClass("current")})):function(e){var t=e.children("h4, h5"),n=e.children(":not(h4, h5)");t.addClass("open current"),n.stop().slideDown(at,function(){e.addClass("current"),n.addClass("current")})}(a)}function lt(e){e.preventDefault();var t=$(e.currentTarget),n=t.parent().siblings("ul.toc-section-nested");t.hasClass("is-closed")?(n.stop().slideDown(),t.removeClass("is-closed"),t.addClass("is-open")):(n.stop().slideUp(),t.removeClass("is-open"),t.addClass("is-closed"))}var ut=Object.freeze({setup:function(){var e,t,n,r,a,o,s=$("body").attr("data-project");("stitch"===s||"realm"===s)&&($(".sidebar a.current").parent("li").addClass("selected-item"),t=$(".sphinxsidebarwrapper"),n=$("ul.toc-section-root.current"),r=$("ul.toc-section-root:not(.current)"),a=$("ul.toc-section-nested.current"),o=$("ul.toc-section-nested:not(.current)"),n.show(),a.show(),r.hide(),o.hide(),t.show(),(e=$(".toctree-root .toctree-l1")).on("click","h3",st),e.on("click","h4",it),e.on("click","h5",it),e.on("click","a span.nested-page-toggle",lt),function(){$("ul.toctree-root li:not(.contains-nested) > a.reference").prepend(function(){return $('<span class="page-icon"></span>')});var e=$("li.contains-nested > a:not(.current)").filter($("li.contains-nested > ul:not(.toc-section-nested.current)").siblings("a")),t=$("li.contains-nested > a.current").add($("li.contains-nested > ul.toc-section-nested.current").siblings("a"));e.prepend('<span class="nested-page-toggle is-closed"></span>'),t.prepend('<span class="nested-page-toggle is-open contains-current-page"></span>'),$("ul.toc-section-nested a.reference").prepend(function(){return $('<span class="nested-page-line"></span>')})}())}});var dt=Object.freeze({initialize:function(){},setup:function(e){return!1}}),ct="guide__deploymentpill--active",pt="guide__pill",ht="guide__deploymentpill",mt="show-current-deployment";function ft(e){for(var t=document.getElementsByClassName(pt),n=0;n<t.length;n+=1){t[n].getAttribute("data-tabid")===e?t[n].classList.add(ct):t[n].classList.remove(ct)}document.getElementsByClassName(mt).length>0&&(document.getElementsByClassName(mt)[0].innerHTML=e)}function vt(e,t){var n=document.createElement("li");return n.classList.add(pt),n.classList.add(ht),n.setAttribute("data-tabid",e),n.innerHTML=e,function(e){e.addEventListener("click",function(e){Te.dispatch({isUserAction:!0,tabId:e.target.innerHTML,type:"cloud"})})}(n),ft(e),n}Te.listen(function(e){"cloud"===e.type&&ft(e.tabId)});var gt,yt=Object.freeze({setup:function(){var e=document.getElementsByClassName("guide-prefs__deploy")[0];if(void 0!==e)if(0===document.getElementsByClassName("tabpanel-cloud").length&&document.getElementsByClassName("guide-prefs__deploy").length>0)document.getElementsByClassName("guide-prefs__deploy")[0].style.display="none";else{var t=Ie();void 0===t.cloud&&(t.cloud="local");var n,r=document.createElement("ul");r.classList.add("guide__pills"),r.classList.add("pillstrip-declaration"),r.setAttribute("role","tablist"),r.setAttribute("data-tab-preference","cloud"),r.appendChild(vt("cloud",t.cloud)),r.appendChild(vt("local",t.cloud)),e.appendChild(r),ft(t.cloud),n=t.cloud,Te.dispatch({isUserAction:!0,tabId:n,type:"cloud"})}}}),bt=(a(gt={},"local",{options:[{name:"authSource",type:"text"}],template:"mongodb://$[username]:$[password]@$[hostlist]/$[database]?$[options]",templatePasswordRedactedShell:"mongodb://$[hostlist]/$[database]?$[options] --username $[username]",templateShell:"mongodb://$[username]:$[password]@$[hostlist]/$[database]?$[options]"}),a(gt,"local with replica set",{options:[{name:"replicaSet",type:"text"},{name:"authSource",type:"text"},{name:"ssl",type:"pass-through",value:"true"}],template:"mongodb://$[username]:$[password]@$[hostlist]/$[database]?$[options]",templatePasswordRedactedShell:"mongodb://$[hostlist]/$[database]?$[options] --username $[username] --password",templateShell:"mongodb://$[username]:$[password]@$[hostlist]/$[database]?$[options]"}),a(gt,"Atlas (Cloud) v. 3.6",{options:[],template:"mongodb+srv://$[username]:$[password]@$[hostlist]/$[database]?retryWrites=true",templatePasswordRedactedShell:"mongodb+srv://$[hostlist]/$[database] --username $[username] --password",templateShell:"mongodb+srv://$[username]:$[password]@$[hostlist]/$[database]"}),a(gt,"Atlas (Cloud) v. 3.4",{options:[{name:"replicaSet",type:"text"},{name:"authSource",type:"text"},{name:"ssl",type:"pass-through",value:"true"}],template:"mongodb://$[username]:$[password]@$[hostlist]/$[database]?$[options]",templatePasswordRedactedShell:"mongodb://$[hostlist]/$[database]?replicaSet=$[replicaSet] --ssl --authenticationDatabase $[authSource] --username $[username] --password",templateShell:"mongodb://$[hostlist]/$[database]?replicaSet=$[replicaSet] --ssl --authenticationDatabase $[authSource] --username $[username] --password $[password]"}),gt);function wt(e,t){return"pass-through"===t.type?t.value:e}var St=/&lt;(?:(?:URISTRING(?:_(?:(?:SHELL_NOUSER)|(?:SHELL)))?)|(?:USERNAME))&gt;/g;var _t=function(){function e(t,r){n(this,e),this.root=t,this.uriWriter=r,this.elementPairs=[],this.updateHostsFromUriWriter()}return r(e,[{key:"updateHostsFromUriWriter",value:function(){this.elementPairs=[],this.root.innerText="";for(var e=0,t=this.uriWriter.loadState(this.uriWriter.loadCurrentState()).hostlist||[],n=t.length;e<n;e++){var r=t[e];this.addHost(r)}this.addHost()}},{key:"addHost",value:function(e){var t=this,n=document.createElement("input");n.className="mongodb-form__input",n.placeholder="localhost:27017",n.value=e||"";var r=document.createElement("div");r.className="mongodb-form__status",n.oninput=function(){if(n.value)t.lastInput===n&&t.addHost();else if(t.lastInput!==n)return t.elementPairs=t.elementPairs.filter(function(e){return e[0]!==n}),t.root.removeChild(n),t.root.removeChild(r),void t.uriWriter.setHosts(t.hosts);try{!function(e){var t=/^\s*([^:\s]+)(?::(\d+))?\s*$/.exec(e);if(!t)throw new Error('Invalid host format: must match the format "hostname:port"');var n=parseInt(t[2],10);if(isNaN(n))throw new Error('Missing port: host must match the format "hostname:port"');if(n>65535)throw new Error("Port number is too large");t[1]}(n.value)}catch(e){return n.setCustomValidity(e.message),r.innerText=e.message,void r.classList.add("mongodb-form__status--invalid")}r.innerText="",r.classList.remove("mongodb-form__status--invalid"),n.setCustomValidity(""),t.uriWriter.setHosts(t.hosts)},this.root.appendChild(n),this.root.appendChild(r),this.elementPairs.push([n,r])}},{key:"hosts",get:function(){return this.elementPairs.map(function(e){return e[0].value.trim()}).filter(function(e){return e})}},{key:"lastInput",get:function(){return this.elementPairs[this.elementPairs.length-1][0]}}]),e}(),Ct=null,kt=function(){function e(){n(this,e),this.uristowrite=[],this.usernamestowrite=[],this.uristowritepasswordredactedshell=[],this.uristowriteshell=[],this.urireplacestring="",this.options={},this.hostList=null,this.setupURIListeners(),this.loadTemplateEnv(),this.renderURI(),this.registerDispatch()}return r(e,[{key:"loadTemplateEnv",value:function(){void 0===this.loadState(this.loadCurrentState()).env&&("local"===this.loadCurrentState()||"undefined"===this.loadCurrentState()?this.saveState({env:"local"},"local"):this.saveState({env:"Atlas (Cloud) v. 3.6"},"cloud"))}},{key:"loadState",value:function(e){return"cloud"===e?JSON.parse(window.localStorage.getItem("uriwriter_atlas"))||{}:JSON.parse(window.localStorage.getItem("uriwriter_local"))||{}}},{key:"saveState",value:function(e,t){"cloud"===t?window.localStorage.setItem("uriwriter_atlas",JSON.stringify(e)):window.localStorage.setItem("uriwriter_local",JSON.stringify(e))}},{key:"loadCurrentState",value:function(){return window.localStorage.getItem("uriwriter_currentstate")}},{key:"saveCurrentState",value:function(e){window.localStorage.setItem("uriwriter_currentstate",e)}},{key:"addValue",value:function(e,t){var n=this.loadState(this.loadCurrentState());"atlaspasteduri"!==e&&"env"!==e&&delete n.atlaspasteduri,n[e]=t,this.saveState(n,this.loadCurrentState())}},{key:"setupURIListeners",value:function(){!function(){for(var e=document.getElementsByTagName("pre"),t=0;t<e.length;t+=1)e[t].innerHTML=e[t].innerHTML.replace(St,'<span class="uristring-element">$&</span>')}();for(var e=document.getElementsByClassName("uristring-element"),t=0;t<e.length;t+=1)e[t].innerHTML.indexOf("&lt;URISTRING&gt;")>-1&&this.uristowrite.push(e[t]),e[t].innerHTML.indexOf("&lt;USERNAME&gt;")>-1&&this.usernamestowrite.push(e[t]),e[t].innerHTML.indexOf("&lt;URISTRING_SHELL&gt;")>-1&&this.uristowriteshell.push(e[t]),e[t].innerHTML.indexOf("&lt;URISTRING_SHELL_NOUSER&gt;")>-1&&this.uristowritepasswordredactedshell.push(e[t])}},{key:"writeToPlaceholders",value:function(){for(var e=0;e<this.uristowrite.length;e+=1){var t="'"===(n=this.uristowrite[e].innerHTML).charAt(0)||'"'===n.charAt(0)?n.charAt(0):"";this.uristowrite[e].innerHTML=""+t+this.urireplacestring+t}for(var n,r=0;r<this.uristowritepasswordredactedshell.length;r+=1)this.uristowritepasswordredactedshell[r].innerHTML=this.urireplacestringPasswordRedactedShell;for(var a=0;a<this.uristowriteshell.length;a+=1)this.uristowriteshell[a].innerHTML=this.urireplacestringShell;for(var o=0;o<this.usernamestowrite.length;o+=1)this.usernamestowrite[o].innerHTML=this.username}},{key:"setEnvironment",value:function(e){var t=e.startsWith("Atlas (Cloud)");t?this.saveCurrentState("cloud"):this.saveCurrentState("local");var n=this.loadState(this.loadCurrentState()),r=Boolean(document.getElementById("uriwriter"));if(t&&r&&(document.getElementsByClassName("atlascontrols__status")[0].style.display="none",void 0!==n.atlaspasteduri))return this.parseIncomingAtlasString(n.atlaspasteduri),this.renderURI(),void this.populateForm();(void 0!==n&&void 0!==n.env&&n.env.startsWith("Atlas (Cloud)")||t)&&r&&this.hostList.updateHostsFromUriWriter(),this.addValue("env",e),this.renderURI(),r&&this.populateForm()}},{key:"toggleEnvironmentExternal",value:function(e){var t=document.getElementById("deployment_type");t.style.display="cloud"===e?"none":"block"}},{key:"setupEnvironmentListeners",value:function(){var e=this,t=document.getElementsByClassName("uriwriter__toggle"),n=this.loadState(this.loadCurrentState()).env;"Atlas (Cloud) v. 3.6"!==n&&"Atlas (Cloud) v. 3.4"!==n||(n="Atlas (Cloud)");for(var r=0;r<t.length;r+=1)n===t[r].innerHTML&&t[r].classList.add("guide__pill--active"),t[r].onclick=function(t){for(var n=t.target,r=n.parentElement.children,a=0;a<r.length;a+=1)r[a].classList.remove("guide__pill--active");n.classList.add("guide__pill--active"),e.setEnvironment(n.innerHTML)}}},{key:"renderURI",value:function(){"Atlas (Cloud)"===this.loadState(this.loadCurrentState()).env&&this.addValue("env","Atlas (Cloud) v. 3.6");var e=bt[this.loadState(this.loadCurrentState()).env];e&&(this.uristring=e.template,this.options=e.options,this.urireplacestring=this.replaceString(this.uristring,"&"),this.urireplacestringShell=this.replaceString(e.templateShell,","),this.urireplacestringPasswordRedactedShell=this.replaceString(e.templatePasswordRedactedShell,","),this.username=this.loadState(this.loadCurrentState()).username,this.writeToPlaceholders())}},{key:"optionStringifier",value:function(e,t){for(var n=[],r=this.loadState(this.loadCurrentState()),a=0;a<this.options.length;a+=1){var o=this.options[a],s=o.name,i=wt(r[s],o);i||(i=o.placeholder?o.placeholder:"$["+s+"]"),n.push(s+"="+i)}return n.join(t)}},{key:"replaceString",value:function(e,t){var n=this.loadState(this.loadCurrentState());n.username&&(e=e.replace("$[username]",n.username)),n.database&&(e=e.replace("$[database]",n.database)),n.authSource&&(e=e.replace("$[authSource]",n.authSource)),n.replicaSet&&(e=e.replace("$[replicaSet]",n.replicaSet));var r=this.optionStringifier(this.options,t);return r.length>0&&(e=e.replace("$[options]",r)),n.hostlist&&n.hostlist.length>0&&(e=e.replace("$[hostlist]",n.hostlist.join(","))),e}},{key:"renderOptions",value:function(){for(var e=document.getElementsByClassName("uriwriter__option-prompt");e.length>0;)e[0].parentElement.removeChild(e[0]);if(this.options&&this.options.length>0)for(var t=0;t<this.options.length;t+=1)"pass-through"!==this.options[t].type&&this.renderOption(this.options[t])}},{key:"renderOption",value:function(e){var t=this,n=document.createElement("label");n.className="mongodb-form__prompt uriwriter__option-prompt";var r=document.createElement("div");r.className="mongodb-form__label",r.innerText=e.name;var a=document.createElement("input");a.setAttribute("id",e.name),e.placeholder&&a.setAttribute("placeholder",e.placeholder),a.className="mongodb-form__input",void 0!==this.loadState(this.loadCurrentState())[e.name]&&(a.value=this.loadState(this.loadCurrentState())[e.name]),a.addEventListener("input",function(n){t.addValue(e.name,document.getElementById(e.name).value),t.renderURI()}),n.appendChild(r),n.appendChild(a);var o=document.querySelector("[data-server-configuration]");o.parentElement.insertBefore(n,o)}},{key:"initializeWidget",value:function(){var e=this;if(document.getElementById("uriwriter")){this.hostList=new _t(document.getElementById("hostlist"),this),document.getElementById("uriwriter_username").addEventListener("input",function(t){e.addValue("username",t.target.value),e.renderURI()});var t=document.getElementById("uriwriter_atlaspaste"),n=document.getElementsByClassName("atlascontrols__status")[0];t.oninput=function(r){var a=t.value;if(!a.trim())return n.style.display="none",void t.setCustomValidity("");e.parseIncomingAtlasString(a)?(t.setCustomValidity(""),e.addValue("atlaspasteduri",a),function(e){e.classList.add("mongodb-form__status--good"),e.classList.remove("mongodb-form__status--invalid"),e.style.display="",e.innerText="Connection string parsed"}(n),e.renderURI(),e.populateForm()):(t.setCustomValidity("Failed to parse"),function(e){e.classList.add("mongodb-form__status--invalid"),e.classList.remove("mongodb-form__status--good"),e.style.display="",e.innerText="Connection string could not be parsed"}(n))},document.getElementById("uriwriter_db").addEventListener("input",function(t){e.addValue("database",document.getElementById("uriwriter_db").value),e.renderURI()}),this.setupEnvironmentListeners(),this.populateForm()}}},{key:"renderFormValues",value:function(){var e=this.loadState(this.loadCurrentState()),t=document.getElementsByClassName("uriwriter__atlascontrols")[0];if("local"!==e.env&&"local with replica set"!==e.env)return document.getElementById("uriwriter_atlaspaste").value=e.atlaspasteduri||"",void 0!==e.atlaspasteduri?t.style.display="":t.style.display="none",document.getElementById("userinfo_form").style.display="none",void(t.style.display="");t.style.display="none",document.getElementById("userinfo_form").style.display="",void 0!==e.username&&(document.getElementById("uriwriter_username").value=e.username),void 0!==e.database&&(document.getElementById("uriwriter_db").value=e.database)}},{key:"setHosts",value:function(e){var t=this.loadState(this.loadCurrentState());t.hostlist=e,this.saveState(t,this.loadCurrentState()),this.renderURI()}},{key:"populateForm",value:function(){this.toggleEnvironmentExternal(this.loadCurrentState()),this.renderOptions(),this.renderFormValues(),this.hostList=new _t(document.getElementById("hostlist"),this)}},{key:"registerDispatch",value:function(){var e=this;Te.listen(function(t){if(Ct&&(e.renderURI(),"cloud"===t.type)){if("cloud"===t.tabId){if("cloud"===e.loadCurrentState())return;e.saveCurrentState("cloud"),e.loadTemplateEnv(),e.renderURI()}else{if("local"===e.loadCurrentState())return;e.saveCurrentState("local"),e.loadTemplateEnv(),e.renderURI()}Boolean(document.getElementById("uriwriter"))&&e.populateForm()}})}},{key:"parseOutShellParams",value:function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].startsWith("--")&&!e[n+1].startsWith("--")){var r=e[n].replace("--",""),a=e[n+1];"authenticationDatabase"===r&&(r="authSource"),a.startsWith("--")||(a=a.replace("<","").replace(">",""),t[r]=a)}}},{key:"parseOutURIParams",value:function(e,t){for(var n=e.split("&"),r=0;r<n.length;r+=1){var a=n[r].split("=");t[a[0]]=a[1]}}},{key:"parseOutEnvAndClusters",value:function(e,t){var n=/(\w+):\/\/((\S+)(:)+(\S+))\/(\w+)?\?(\S+)/;e.startsWith("mongodb+srv")&&(n=/((\w+)\+(\w+)):\/\/((\S+))\/(\w+)/);var r=e.match(n);if("mongodb"===r[1]){t.env="Atlas (Cloud) v. 3.4";var a=r[2];t.hostlist=a.split(","),this.parseOutURIParams(r[7],t)}else t.env="Atlas (Cloud) v. 3.6",t.hostlist=[r[4]];t.database=r[6]}},{key:"parseShell",value:function(e,t){var n=e.split(" "),r=n[1];return r=r.replace(/"/g,""),this.parseOutShellParams(n,t),this.parseOutEnvAndClusters(r,t),this.saveState(t,"cloud"),!0}},{key:"parseIncomingAtlasString",value:function(e){if(void 0===e)return!1;if(null!==(e=e.replace(/[\n\r]+/g,"").trim())){var t=this.parseAtlasString(e);return this.hostList.updateHostsFromUriWriter(),t}return!1}},{key:"parseTo3dot4",value:function(e,t){t.env="Atlas (Cloud) v. 3.4",this.saveState(t,"cloud"),t=this.loadState(this.loadCurrentState());var n=e.match(/(\S+):\/\/(\S+):(\S*)@(\S+)\/(\S+)\?(\S+)/);return!!n&&(t.username=n[2],t.hostlist=n[4].split(","),t.database=n[5],function(e,t){var n=t.split("&");if(n.length>0)for(var r=0;r<n.length;r+=1){var a=n[r].split("=");e[a[0]]=a[1]}}(t,n[6]),this.saveState(t,this.loadCurrentState()),!0)}},{key:"parseTo3dot6",value:function(e,t){t.env="Atlas (Cloud) v. 3.6",this.saveState(t,"cloud"),t=this.loadState(this.loadCurrentState());var n=e.match(/(\S+):\/\/(\S+):(\S*)@(\S+)\/([^\s?]+)\?/);return!!n&&(t.username=n[2],t.havePassword=Boolean(n[3]),t.hostlist=[n[4]],t.database=n[5],this.saveState(t,this.loadCurrentState()),!0)}},{key:"parseAtlasString",value:function(e){var t=this.loadState("true");return e.indexOf(" --")>-1?this.parseShell(e,t):e.startsWith("mongodb+srv")?this.parseTo3dot6(e,t):this.parseTo3dot4(e,t)}}]),e}();var Et=Object.freeze({setup:function(){(Ct=new kt).initializeWidget()}});var xt=Object.freeze({setup:function(){$(".version-selector").on("click",function(e){e.preventDefault();var t=$(e.currentTarget).data("path");window.location.href=function(e){var t=document.getElementsByClassName("body")[0].getAttribute("data-pagename");return"index"===t?t="":t&&(t+="/"),"/"+e+"/"+t}(t)})}}),Nt=new(function(){function e(){n(this,e),this.components=[]}return r(e,[{key:"register",value:function(e){this.components.push(e),e.init&&e.init()}},{key:"update",value:function(){for(var e=0,t=this.components,n=t.length;e<n;e++){t[e].setup(this)}window.location.hash&&(window.location.hash=window.location.hash)}}]),e}());$(function(){jQuery.fn.load=function(e){$(window).on("load",e)},Nt.register(e),Nt.register(w),Nt.register(k),Nt.register(x),Nt.register(N),Nt.register(Ne),Nt.register(ze),Nt.register(rt),Nt.register(ut),Nt.register(tt),Nt.register(Be),Nt.register(xt),Nt.register(dt),Nt.register(je),Nt.register(Ke),Nt.register(Et),Nt.register(yt),Nt.register(y),Nt.register(g),Nt.register(Qe),$(".toc > ul > li > ul > li").length||$(".right-column .toc").hide(),$(".expand-toc-icon").on("click",function(e){e.preventDefault(),$(".sidebar").toggleClass("reveal")});var t=$(window),n=$(".sidebar"),r=t.width()<=1093;if(t.resize(function(e){r&&t.width()>1093?(r=!1,n.removeClass("reveal")):!r&&t.width()<=1093&&(r=!0)}),Nt.update(),document.querySelector){var a=document.querySelector("a.current");a&&a.scrollIntoView(!1)}})}();
//# sourceMappingURL=controller.js.map
